workflow:
  name: research_report
  version: "1.0"
  description: "Generate a long-form research report with sections using NotebookLM."

steps:
  - step_type: step_start
    name: start

  - step_type: tool_call
    name: generate_report
    tool: tool.notebooklm.run
    building: notebooklm
    input_contract: buildings/notebooklm/contracts/input.schema.json
    output_contract: buildings/notebooklm/contracts/output.schema.json
    sop_path: buildings/notebooklm/sop/v1.0/sop.yaml

  - step_type: verify
    name: verify_report_quality
    checks:
      - type: output_schema
        contract: buildings/notebooklm/contracts/output.schema.json
      - type: citations_present
        min_citations: 2

  - step_type: report
    name: finalize_report
    output: report

  - step_type: step_end
    name: end
