workflow:
  name: research_brief
  version: "1.0"
  description: "Generate a short research brief using NotebookLM grounded in provided sources."

steps:
  - step_type: step_start
    name: start

  - step_type: tool_call
    name: generate_brief
    tool: tool.notebooklm.run
    building: notebooklm
    input_contract: buildings/notebooklm/contracts/input.schema.json
    output_contract: buildings/notebooklm/contracts/output.schema.json
    sop_path: buildings/notebooklm/sop/v1.0/sop.yaml

  - step_type: verify
    name: verify_brief
    checks:
      - type: output_schema
        contract: buildings/notebooklm/contracts/output.schema.json
      - type: citations_present
        min_citations: 1

  - step_type: report
    name: finalize_brief
    output: brief

  - step_type: step_end
    name: end
